# Implementation Plan: ë ˆê±°ì‹œ ì½”ë“œ ì •ë¦¬

**Status**: âœ… Completed  
**Plan ID**: P-009  
**Started**: 2026-01-03  
**Completed**: 2026-01-06  

---

## âš ï¸ ê³„íšì„œ ìˆ˜ì • ê°€ì´ë“œë¼ì¸

> ì´ ê³„íšì„œëŠ” **ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸**ë©ë‹ˆë‹¤. ë ˆê±°ì‹œ ì½”ë“œë¥¼ ì‚­ì œí•  ë•Œ ì•„ë˜ ì ˆì°¨ë¥¼ ë”°ë¥´ì„¸ìš”.

### ìƒˆ Phase ì¶”ê°€ ì‹œ

1. **ğŸ“ˆ Progress Tracking** ì„¹ì…˜ì— ìƒˆ Phase ì¶”ê°€
2. **ğŸ“œ Phase ê¸°ë¡** ì„¹ì…˜ì— ìƒì„¸ ê¸°ë¡ ì¶”ê°€:
   - ì‚­ì œ ëŒ€ìƒ íŒŒì¼/ì½”ë“œ ëª©ë¡
   - **ì‚­ì œ ì „/í›„ ì½”ë“œ ë¹„êµ** (ë°˜ë“œì‹œ í¬í•¨)
   - Tasks ì²´í¬ë¦¬ìŠ¤íŠ¸
   - Quality Gate ì²´í¬ë¦¬ìŠ¤íŠ¸
3. **ğŸ”„ í˜„ì¬ ìƒíƒœ** í…Œì´ë¸” ì—…ë°ì´íŠ¸

### Phase ì™„ë£Œ ì‹œ

1. âœ… ëª¨ë“  Tasks ì²´í¬ë°•ìŠ¤ ì™„ë£Œ í‘œì‹œ
2. ğŸ§ª Quality Gate ê²€ì¦ (`ruff`, `pytest`)
3. ğŸ“Š **ì½”ë“œë² ì´ìŠ¤ ë³€í™” ì¶”ì´** í…Œì´ë¸”ì— ê²°ê³¼ ì¶”ê°€
4. ğŸ“ **í˜„ì¬ ì½”ë“œ êµ¬ì¡°** ë‹¤ì´ì–´ê·¸ë¨ ì—…ë°ì´íŠ¸
5. ğŸ“ **Notes & Learnings**ì— êµí›ˆ ê¸°ë¡
6. ğŸ“… ìƒë‹¨ì˜ `Last Updated` ë‚ ì§œ ê°±ì‹ 

### í•„ìˆ˜ í¬í•¨ ì‚¬í•­

- **ì‚­ì œ ì „ ì½”ë“œ**: ì‚­ì œë  ì½”ë“œì˜ í•µì‹¬ ë¶€ë¶„
- **ì‚­ì œ í›„ ì½”ë“œ**: ì •ë¦¬ëœ í›„ì˜ ìƒíƒœ
- **ëŒ€ì²´ëœ ê¸°ëŠ¥**: ì‚­ì œëœ ê¸°ëŠ¥ì´ ë¬´ì—‡ìœ¼ë¡œ ëŒ€ì²´ë˜ì—ˆëŠ”ì§€
- **í…ŒìŠ¤íŠ¸ ê²°ê³¼**: ì‚­ì œ ì „í›„ í…ŒìŠ¤íŠ¸ ìˆ˜ ë³€í™”

### â›” ì½”ë“œ ì‚­ì œ ì›ì¹™

> **ì‚­ì œëœ ì½”ë“œì— ì£¼ì„ì„ ë‚¨ê¸°ì§€ ë§ˆì„¸ìš”.**  
> ì›ë˜ ì—†ì—ˆë˜ ê²ƒì²˜ëŸ¼ ê¹”ë”í•˜ê²Œ ì‚­ì œí•©ë‹ˆë‹¤.

```python
# âŒ ì˜ëª»ëœ ì˜ˆì‹œ
class UserSettings:
    # morning_briefing_enabled ì‚­ì œë¨ (2026-01-06)
    # morning_briefing_hour ì‚­ì œë¨

# âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
class UserSettings:
    # ê¹”ë”í•˜ê²Œ ì‚­ì œ, ì£¼ì„ ì—†ìŒ
```

ì‚­ì œ ê¸°ë¡ì€ **ì´ ê³„íšì„œì—ë§Œ** ë‚¨ê¸°ê³ , ì½”ë“œì—ëŠ” í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## ğŸ“‹ Overview

### ëª©ì 

íŒ¨ë‹ˆì € í”„ë¡œì íŠ¸ì˜ ë²„ì „ ì—…ê·¸ë ˆì´ë“œì— ë”°ë¼ **ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë ˆê±°ì‹œ ì½”ë“œë¥¼ ì •ë¦¬**í•˜ê³ , ì½”ë“œë² ì´ìŠ¤ë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.

ì´ ê³„íšì„œëŠ” **ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸**ë˜ë©°, ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ì „í™˜í•  ë•Œë§ˆë‹¤ ì‚­ì œ ëŒ€ìƒì´ ì¶”ê°€ë©ë‹ˆë‹¤.

---

## ğŸ“Š ì½”ë“œë² ì´ìŠ¤ ë³€í™” ì¶”ì´

| ì‹œì  | í…ŒìŠ¤íŠ¸ ìˆ˜ | ì‚­ì œëœ íŒŒì¼ | ì‚­ì œëœ ì½”ë“œ ë¼ì¸ | ì£¼ìš” ë³€ê²½ |
|------|----------|------------|-----------------|----------|
| v1.0 ì´ˆê¸° | 150 | - | - | ì´ˆê¸° êµ¬í˜„ |
| Phase 1-4 ì™„ë£Œ | 150 | 3 | ~200 | Rule-based ê¸°ëŠ¥ ì‚­ì œ |
| Phase 5 ì™„ë£Œ | 317 | 7 | ~400 | ë ˆê±°ì‹œ í´ë˜ìŠ¤ ì™„ì „ ì‚­ì œ |
| Phase 6 ì™„ë£Œ | 270 | 12 | ~1,800 | v3.0 ì „í™˜ + ìºì‹œ ì‚­ì œ |

---

## ï¿½ í˜„ì¬ ìƒíƒœ

### ì‚­ì œ ì™„ë£Œëœ ê¸°ëŠ¥ (Phase 6 í¬í•¨)

| ê¸°ëŠ¥ | ì‚­ì œ ì™„ë£Œì¼ | Phase | ëŒ€ì²´ëœ ê¸°ëŠ¥ |
|------|-----------|-------|-----------|
| ì±„ë„ ë©”ì‹œì§€ ëª¨ë‹ˆí„°ë§ | 2026-01-03 | 1 | DM ì „ìš©ìœ¼ë¡œ ë‹¨ìˆœí™” |
| @ë©˜ì…˜ í•¸ë“¤ëŸ¬ | 2026-01-03 | 2 | DM ì „ìš©ìœ¼ë¡œ ë‹¨ìˆœí™” |
| ì•„ì¹¨ ë¸Œë¦¬í•‘ ìŠ¤ì¼€ì¤„ëŸ¬ | 2026-01-03 | 3 | v2.0 ììœ¨ íŒë‹¨ ì‹œìŠ¤í…œ |
| `ProactiveAlertGenerator` í´ë˜ìŠ¤ | 2026-01-06 | 5 | v2.0 ììœ¨ íŒë‹¨ ì‹œìŠ¤í…œ |
| `AlertTemplates` í´ë˜ìŠ¤ | 2026-01-06 | 5 | v2.0 ììœ¨ íŒë‹¨ ì‹œìŠ¤í…œ |
| `morning_briefing` ì„¤ì • | 2026-01-06 | 5 | v2.0 ììœ¨ íŒë‹¨ ì‹œìŠ¤í…œ |
| iCloud ì—°ë™ | 2026-01-06 | 6 | Google Calendar ì „ìš© |
| `AdaptiveScheduler` (í´ë§ ë°©ì‹) | 2026-01-06 | 6 | ì´ë²¤íŠ¸ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ëŸ¬ |
| OpenWeatherMap API | 2026-01-06 | 6 | ê¸°ìƒì²­ API |
| ìºì‹œ ì‹œìŠ¤í…œ (CacheService) | 2026-01-06 | 6 | ì§ì ‘ API í˜¸ì¶œ |

---

## ğŸ“ í˜„ì¬ ì½”ë“œ êµ¬ì¡° (ì •ë¦¬ í›„)

```
src/
â”œâ”€â”€ adapters/
â”‚   â”œâ”€â”€ slack/
â”‚   â”‚   â”œâ”€â”€ handler.py          âœ… DM ì „ìš© (ì±„ë„/ë©˜ì…˜ ì‚­ì œë¨)
â”‚   â”‚   â””â”€â”€ oauth_commands.py   âœ… Google Calendar ì „ìš©
â”‚   â””â”€â”€ oauth/
â”‚       â””â”€â”€ server.py           âœ… Google OAuth ì „ìš©
â”‚
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ oauth_service.py    âœ… ìœ ì§€
â”‚   â”‚   â””â”€â”€ token_repository.py âœ… ìœ ì§€
â”‚   â”‚
â”‚   â”œâ”€â”€ autonomous/
â”‚   â”‚   â”œâ”€â”€ nodes/              âœ… v2.0 ììœ¨ íŒë‹¨ ë…¸ë“œ
â”‚   â”‚   â”œâ”€â”€ runner.py           âœ… ìœ ì§€
â”‚   â”‚   â””â”€â”€ scheduler/          âœ… v3.0 ì´ë²¤íŠ¸ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ëŸ¬ ì˜ˆì •
â”‚   â”‚
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â””â”€â”€ user_settings.py    âœ… morning_briefing ì‚­ì œë¨
â”‚   â”‚
â”‚   â””â”€â”€ tools/plugins/
â”‚       â””â”€â”€ weather.py          âœ… ê¸°ìƒì²­ API ì‚¬ìš©
â”‚
â””â”€â”€ services/
    â””â”€â”€ weather/
        â”œâ”€â”€ kma_weather.py      âœ… ê¸°ìƒì²­ ë‹¨ê¸°ì˜ˆë³´ API (ì‹ ê·œ)
        â””â”€â”€ cached_weather.py   âœ… ê¸°ìƒì²­ API ì‚¬ìš©
```

---

## ğŸ“ˆ Progress Tracking

```
Phase 1: ì±„ë„ ëª¨ë‹ˆí„°ë§ ì‚­ì œ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (2026-01-03)
Phase 2: ë©˜ì…˜ í•¸ë“¤ëŸ¬ ì‚­ì œ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (2026-01-03)
Phase 3: ì•„ì¹¨ ë¸Œë¦¬í•‘ ì‚­ì œ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (2026-01-03)
Phase 4: í…ŒìŠ¤íŠ¸/ë¬¸ì„œ ì •ë¦¬      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (2026-01-03)
Phase 5: ë ˆê±°ì‹œ í´ë˜ìŠ¤ ì‚­ì œ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (2026-01-06)
Phase 6: v3.0 ì „í™˜ ë ˆê±°ì‹œ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… (2026-01-06)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Overall Progress:              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… Complete
```

---

## ğŸ“œ Phase ê¸°ë¡

### Phase 1-4: v1.0 â†’ v2.0 ì „í™˜ (ì™„ë£Œ)

**ê¸°ê°„**: 2026-01-03

**ì‚­ì œ ì „**:
```python
# handler.py ì— 3ê°œì˜ í•¸ë“¤ëŸ¬ ì¡´ì¬
def _handle_dm(self, event): ...
def _handle_channel(self, event): ...
def _handle_mention(self, event): ...
```

**ì‚­ì œ í›„**:
```python
# handler.py ì— DM í•¸ë“¤ëŸ¬ë§Œ ìœ ì§€
def _handle_dm(self, event): ...
```

**ê²°ê³¼**: ì½”ë“œ ë‹¨ìˆœí™”, ë³µì¡ë„ ê°ì†Œ

---

### Phase 5: ë ˆê±°ì‹œ í´ë˜ìŠ¤ ì™„ì „ ì‚­ì œ (ì™„ë£Œ)

**ê¸°ê°„**: 2026-01-06

**ì‚­ì œëœ íŒŒì¼**:
- `src/core/logic/proactive_alert.py`
- `src/core/templates/alert_templates.py`
- `src/core/templates/` (ë””ë ‰í† ë¦¬)
- `tests/unit/core/test_proactive_alert.py`

**ìˆ˜ì •ëœ íŒŒì¼**:
- `src/core/settings/user_settings.py` (morning_briefing í•„ë“œ/ë©”ì„œë“œ ì‚­ì œ)

**ì‚­ì œ ì „ (`user_settings.py`)**:
```python
@dataclass
class UserAlertSettings:
    user_id: str
    enabled: bool = True
    quiet_hours_start: int = 22
    quiet_hours_end: int = 7
    morning_briefing_enabled: bool = True   # âŒ ì‚­ì œë¨
    morning_briefing_hour: int = 8          # âŒ ì‚­ì œë¨
    morning_briefing_minute: int = 0        # âŒ ì‚­ì œë¨
```

**ì‚­ì œ í›„ (`user_settings.py`)**:
```python
@dataclass
class UserAlertSettings:
    user_id: str
    enabled: bool = True
    quiet_hours_start: int = 22
    quiet_hours_end: int = 7
```

**ê²°ê³¼**: 
- í…ŒìŠ¤íŠ¸: 150 â†’ 317 (v2.0 í…ŒìŠ¤íŠ¸ ì¶”ê°€ë¨)
- ì‚­ì œëœ ì½”ë“œ: ~400ì¤„

---

### Phase 6: v3.0 ì „í™˜ ë ˆê±°ì‹œ ì‚­ì œ (ì™„ë£Œ)

**ê¸°ê°„**: 2026-01-06

**ëª©í‘œ**: v3.0 ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ì „í™˜ì— ë”°ë¼ ë¶ˆí•„ìš”í•œ ì½”ë“œ ì‚­ì œ

#### 6.1 iCloud ê´€ë ¨ ì½”ë“œ ì‚­ì œ âœ…

| íŒŒì¼ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| `src/core/auth/icloud_service.py` | âœ… ì‚­ì œ ì™„ë£Œ | Google Calendarë§Œ ì‚¬ìš© |
| `tests/unit/core/auth/test_icloud_service.py` | âœ… ì‚­ì œ ì™„ë£Œ | |
| `src/adapters/slack/oauth_commands.py` | âœ… ìˆ˜ì • ì™„ë£Œ | iCloud ê´€ë ¨ ì½”ë“œ ì œê±° |
| `src/main.py` | âœ… ìˆ˜ì • ì™„ë£Œ | iCloud ì´ˆê¸°í™” ì œê±° |

#### 6.2 í´ë§ ë°©ì‹ ìŠ¤ì¼€ì¤„ëŸ¬ ì‚­ì œ âœ…

| íŒŒì¼ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| `src/core/autonomous/scheduler/adaptive_scheduler.py` | âœ… ì‚­ì œ ì™„ë£Œ | ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ëŒ€ì²´ |
| `src/core/autonomous/scheduler/__init__.py` | âœ… ìˆ˜ì • ì™„ë£Œ | export ì •ë¦¬ |
| `src/main.py` | âœ… ìˆ˜ì • ì™„ë£Œ | AdaptiveScheduler ì½”ë“œ ì œê±° |
| `tests/unit/core/autonomous/test_adaptive_scheduler.py` | âœ… ì‚­ì œ ì™„ë£Œ | |
| `tests/integration/test_memory_system.py` | âœ… ìˆ˜ì • ì™„ë£Œ | AdaptiveScheduler í…ŒìŠ¤íŠ¸ ì œê±° |

#### 6.3 OpenWeatherMap â†’ ê¸°ìƒì²­ API ì „í™˜ âœ…

| íŒŒì¼ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| `src/services/weather/openweathermap.py` | âœ… ì‚­ì œ ì™„ë£Œ | ê¸°ìƒì²­ APIë¡œ ëŒ€ì²´ |
| `src/services/weather/kma_weather.py` | âœ… ì‹ ê·œ ìƒì„± | ê¸°ìƒì²­ ë‹¨ê¸°ì˜ˆë³´ API |
| `src/services/weather/cached_weather.py` | âœ… ìˆ˜ì • ì™„ë£Œ | ê¸°ìƒì²­ API ì‚¬ìš© |
| `src/core/tools/plugins/weather.py` | âœ… ìˆ˜ì • ì™„ë£Œ | ê¸°ìƒì²­ API ì‚¬ìš© |
| `src/services/llm/ai_service.py` | âœ… ìˆ˜ì • ì™„ë£Œ | ê¸°ìƒì²­ API ì‚¬ìš© |
| `src/config/settings.py` | âœ… ìˆ˜ì • ì™„ë£Œ | `kma_api_key` ì¶”ê°€ |
| `src/main.py` | âœ… ìˆ˜ì • ì™„ë£Œ | `kma_api_key` ì‚¬ìš© |
| `tests/unit/services/test_weather.py` | âœ… ìˆ˜ì • ì™„ë£Œ | ê¸°ìƒì²­ API í…ŒìŠ¤íŠ¸ |
| `tests/unit/test_config.py` | âœ… ìˆ˜ì • ì™„ë£Œ | `kma_api_key` í…ŒìŠ¤íŠ¸ |

**Tasks**:
- [x] iCloud ì„œë¹„ìŠ¤ íŒŒì¼ ì‚­ì œ
- [x] iCloud í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‚­ì œ
- [x] Slack OAuth ëª…ë ¹ì–´ì—ì„œ iCloud ì œê±°
- [x] main.pyì—ì„œ iCloud ê´€ë ¨ ì½”ë“œ ì œê±°
- [x] AdaptiveScheduler ì‚­ì œ ì™„ë£Œ
- [x] OpenWeatherMap ì„œë¹„ìŠ¤ ì‚­ì œ
- [x] ê¸°ìƒì²­ API ì„œë¹„ìŠ¤ êµ¬í˜„ (`kma_weather.py`)
- [x] ìºì‹œ ì‹œìŠ¤í…œ ì‚­ì œ
- [x] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼ í™•ì¸ (270 passed)

**Quality Gate**:
- [x] ë¦°íŠ¸ í†µê³¼ (`poetry run ruff check src/`)
- [x] í…ŒìŠ¤íŠ¸ í†µê³¼ (`poetry run pytest tests/`)
- [x] ì‚­ì œëœ ì½”ë“œì— ëŒ€í•œ import ì—ëŸ¬ ì—†ìŒ

#### 6.4 ìºì‹œ ì‹œìŠ¤í…œ ì‚­ì œ âœ…

| íŒŒì¼ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| `src/services/cache/` | âœ… ë””ë ‰í† ë¦¬ ì‚­ì œ | CacheService, RefreshScheduler |
| `src/services/weather/cached_weather.py` | âœ… ì‚­ì œ ì™„ë£Œ | ì§ì ‘ API í˜¸ì¶œ |
| `src/services/directions/cached_directions.py` | âœ… ì‚­ì œ ì™„ë£Œ | ì§ì ‘ API í˜¸ì¶œ |
| `src/core/entities/cache.py` | âœ… ì‚­ì œ ì™„ë£Œ | CachedData ì—”í‹°í‹° |
| `src/services/llm/ai_service.py` | âœ… ìˆ˜ì • ì™„ë£Œ | ìºì‹œ ë˜í¼ ì œê±° |
| `tests/unit/services/test_cache*.py` | âœ… ì‚­ì œ ì™„ë£Œ | ìºì‹œ ê´€ë ¨ í…ŒìŠ¤íŠ¸ |
| `tests/unit/core/test_cache_entity.py` | âœ… ì‚­ì œ ì™„ë£Œ | ìºì‹œ ì—”í‹°í‹° í…ŒìŠ¤íŠ¸ |

---

## ğŸ“ Notes & Learnings

- **Phase 1-4**: v2.0 ì „í™˜ì„ ìœ„í•´ Rule-based ê¸°ëŠ¥ ì‚­ì œ ì™„ë£Œ. DM ì „ìš©ìœ¼ë¡œ ë‹¨ìˆœí™”í•˜ì—¬ ì½”ë“œ ë³µì¡ë„ ê°ì†Œ.
- **Phase 5**: ë ˆê±°ì‹œ í´ë˜ìŠ¤ ì™„ì „ ì‚­ì œ. í…ŒìŠ¤íŠ¸ 317ê°œ ì „ì²´ í†µê³¼ í™•ì¸.
- **Phase 6**: v3.0 ì „í™˜ ì™„ë£Œ. iCloud ì œê±°, AdaptiveScheduler ì‚­ì œ, ê¸°ìƒì²­ API ë„ì…, ìºì‹œ ì‚­ì œ.
  - ê³µê³µë°ì´í„°í¬í„¸ API í‚¤ëŠ” Decoding í‚¤ ì‚¬ìš© ê¶Œì¥ (URL ì¸ì½”ë”© ë¬¸ì œ ë°©ì§€)
  - ìºì‹œ í•„ìš”ì„±ì´ ë‚®ì•„ ì‚­ì œ (API Rate Limit ì—¬ìœ , ì‚¬ìš©ëŸ‰ ì ìŒ)
  - í…ŒìŠ¤íŠ¸ 317 â†’ 270 (47ê°œ ë ˆê±°ì‹œ í…ŒìŠ¤íŠ¸ ì‚­ì œ)

---

## ğŸ”— Related Documents

- [PLAN_master.md](./PLAN_master.md) - í†µí•© ê³„íšì„œ
- [SRS_autonomous_panager.md](../SRS_autonomous_panager.md) - v3.0 ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ
- [PLAN_autonomous_core.md](./PLAN_autonomous_core.md) - v2.0 ììœ¨ ì½”ì–´
