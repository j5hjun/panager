# 📋 Master Plan: 패니저 (Panager) 통합 계획서

**최종 수정일**: 2026-01-05
**현재 버전**: v1.0 (Complete) → v2.0 (In Progress)

---

## ⚠️ 중요 지침 (Critical Instructions)

### 📖 이 문서의 목적

이 통합 계획서(Master Plan)는 패니저 프로젝트의 **모든 계획서를 관리하는 상위 문서**입니다.
개별 계획서를 보기 전에 **반드시 이 문서를 먼저 확인**하여 전체 맥락을 파악하세요.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        📋 문서 계층 구조                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   SRS (요구사항 정의서)                                                     │
│         │                                                                   │
│         ▼                                                                   │
│   PLAN_master.md (통합 계획서) ◀── 📍 현재 문서                            │
│         │                                                                   │
│         ├── PLAN_*.md (개별 계획서들)                                       │
│         │     ├── Phase 1                                                   │
│         │     ├── Phase 2                                                   │
│         │     └── ...                                                       │
│         │                                                                   │
│         └── 구현 코드                                                       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

### 🔄 작업 시작 전 체크리스트

새로운 작업을 시작하기 전에 **반드시 다음을 확인**하세요:

```
□ 1. 이 문서(PLAN_master.md)의 "전체 현황 대시보드" 확인
     → 현재 진행 중인 작업이 무엇인지 파악

□ 2. "계획서 의존성 그래프" 확인
     → 시작하려는 작업의 선행 조건이 충족되었는지 확인
     → 🔒 Blocked 상태인 작업은 의존성 해결 전까지 시작 불가

□ 3. 해당 개별 계획서(PLAN_*.md) 열기
     → 구체적인 Phase와 Task 확인
     → 이전 Phase의 Quality Gate가 모두 통과되었는지 확인

□ 4. 관련 요구사항 정의서(SRS_*.md) 참조
     → 요구사항 ID와 매핑하여 작업 진행
```

---

### 🚨 작업 진행 중 규칙

| 규칙 | 설명 |
|------|------|
| **하나의 계획서에 집중** | 여러 계획서를 동시에 진행하지 마세요. 하나를 완료 후 다음으로 |
| **Phase 순서 준수** | Phase를 건너뛰지 마세요. 각 Phase는 순차적으로 진행 |
| **Quality Gate 필수** | 각 Phase 완료 시 반드시 Quality Gate 검증 |
| **문서 동기화** | 코드 변경 시 관련 문서도 함께 업데이트 |
| **진행률 업데이트** | 작업 완료 시 이 문서의 대시보드 진행률도 업데이트 |

---

### ✅ Phase 완료 시 체크리스트

개별 계획서의 Phase를 완료할 때마다:

```
□ 1. 개별 계획서(PLAN_*.md)에서:
     - [ ] 모든 Task 체크박스 완료 ✅
     - [ ] Quality Gate 모든 항목 통과
     - [ ] "Last Updated" 날짜 업데이트
     - [ ] Phase 상태를 ✅ Complete로 변경

□ 2. 이 문서(PLAN_master.md)에서:
     - [ ] 해당 계획서의 진행률(%) 업데이트
     - [ ] 전체 현황 대시보드 ASCII 바 업데이트
     - [ ] 계획서 요약 섹션의 Phase 상태 업데이트

□ 3. 전체 계획서 완료 시 추가로:
     - [ ] 상태를 ✅ Complete로 변경
     - [ ] 마일스톤 상태 업데이트
     - [ ] 변경 이력에 기록
```

---

### 🆕 새 계획서 생성 시

**⚠️ 반드시 참조해야 할 문서**:
- **[SKILL.md](../tamplates/SKILL.md)** - 계획서 작성 가이드 (TDD, Quality Gate, Phase 구조)
- **[plan-template.md](../tamplates/plan-template.md)** - 계획서 템플릿

**생성 절차**:
1. **SKILL.md 읽기**: Phase 구조, TDD, Quality Gate 표준 숙지
2. **계획서 ID 할당**: 다음 사용 가능한 ID 사용 (P-005, P-006, ...)
3. **계획서 파일 생성**: `docs/plans/PLAN_[기능명].md`
4. **이 문서 업데이트**:
   - 계획서 목록 테이블에 추가
   - 의존성 그래프에 추가
   - 마일스톤에 연결 (해당 시)
5. **요구사항 연결**: SRS의 요구사항 ID 참조

---

### ⚡ 빠른 참조

| 하고 싶은 것 | 확인할 섹션 |
|-------------|------------|
| 전체 진행 상황 파악 | [📊 전체 현황 대시보드](#-전체-현황-대시보드) |
| 다음에 할 작업 결정 | [📁 계획서 목록](#-계획서-목록) + [🔗 의존성 그래프](#-계획서-의존성-그래프) |
| 특정 기능 상세 보기 | [📋 각 계획서 요약](#-각-계획서-요약) → 개별 계획서 링크 |
| 목표 일정 확인 | [📅 마일스톤](#-마일스톤) |
| 새 계획서 만들기 | [🔄 작업 흐름](#-작업-흐름) |

---

## 📊 전체 현황 대시보드

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         패니저 프로젝트 현황                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   v1.0 Core          ████████████████████████████████████████ 100%         │
│   v1.0 Deployment    ████████████████████████████████████████ 100%         │
│   v1.0 Git Workflow  ████████████████████████████████████████ 100%         │
│   v1.0 Tool Expand   ████████████████░░░░░░░░░░░░░░░░░░░░░░░░  40%         │
│   ─────────────────────────────────────────────────────────────────         │
│   v2.0 Legacy Clean  ████████████████████████████████████████ 100% ✅      │
│   v2.0 Auto Core     ████████████████████████████████████████ 100% ✅      │
│   v2.0 Memory System ████████████████████████████████████████ 100% ✅      │
│   v2.0 Multi-User    ████████████████████████████████████████ 100% ✅      │
│                                                                             │
│   전체 진행률: v1.0 기능 85% | v2.0 전환 100%                                 │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🗺️ 버전 로드맵

### v1.0 - Rule-based AI 비서 (현재)

> **목표**: 스케줄 기반의 능동적 알림을 제공하는 AI 비서

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          v1.0 아키텍처                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   사용자 ◀──Slack──▶ 패니저 ◀──LLM──▶ Groq                                 │
│                         │                                                   │
│                         ├── 날씨 API (OpenWeatherMap)                       │
│                         ├── 일정 DB (SQLite)                                │
│                         ├── 길찾기 API (Kakao Maps)                         │
│                         └── 스케줄러 (APScheduler) ← 고정 시간 알림         │
│                                                                             │
│   특징:                                                                     │
│   - 고정된 시간에 아침 브리핑 (08:00)                                       │
│   - 사용자 요청 시 LLM이 도구 선택                                          │
│   - Rule 기반 알림 (if 시간 == X then 알림)                                 │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### v2.0 - Autonomous AI Agent (목표)

> **목표**: LLM이 스스로 판단하고 학습하는 완전 자율 AI 에이전트

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          v2.0 아키텍처                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌──────────────────────────────────────────────────────────────────┐     │
│   │                   자율 판단 루프 (LangGraph)                     │     │
│   │                                                                  │     │
│   │   ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐  │     │
│   │   │  Observe │───▶│  Think   │───▶│   Act    │───▶│ Reflect  │  │     │
│   │   │  (관찰)  │    │  (판단)  │    │  (행동)  │    │  (반성)  │  │     │
│   │   └──────────┘    └────┬─────┘    └──────────┘    └────┬─────┘  │     │
│   │                        │                               │        │     │
│   │                        │         ┌─────────────────────┘        │     │
│   │                        ▼         ▼                              │     │
│   │                   ┌──────────────────┐                          │     │
│   │                   │     Memory       │                          │     │
│   │                   │  (교훈 저장)     │                          │     │
│   │                   └──────────────────┘                          │     │
│   └──────────────────────────────────────────────────────────────────┘     │
│                                                                             │
│   특징:                                                                     │
│   - LLM이 "언제" "무엇을" 할지 스스로 결정                                  │
│   - 과거 실수로부터 학습 (같은 실수 반복 안 함)                             │
│   - 노드 기반 확장 가능 아키텍처                                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📁 계획서 목록

### 🏷️ 상태 범례

| 상태 | 설명 |
|------|------|
| ✅ Complete | 모든 Phase 완료 |
| 🔄 In Progress | 진행 중 |
| ⏳ Planned | 계획됨 (미시작) |
| 🔒 Blocked | 다른 작업에 의해 차단됨 |

---

### v1.0 계획서

| ID | 계획서 | 상태 | 진행률 | 설명 | 의존성 |
|----|--------|------|--------|------|--------|
| P-001 | [PLAN_proactive_ai_assistant](./PLAN_proactive_ai_assistant.md) | ✅ Complete | 100% | v1.0 핵심 기능 (Slack, LLM, 날씨, 일정, 스케줄러) | - |
| P-002 | [PLAN_deployment](./PLAN_deployment.md) | ✅ Complete | 100% | Docker 배포, CI/CD, 모니터링 | P-001 |
| P-003 | [PLAN_git_workflow_improvement](./PLAN_git_workflow_improvement.md) | ✅ Complete | 100% | Git 브랜치 전략, PR 워크플로우 | - |
| P-004 | [PLAN_tool_plugin_expansion](./PLAN_tool_plugin_expansion.md) | 🔄 In Progress | 40% | 도구 확장 (날씨, 일정, 길찾기, 검색, 뉴스, 금융) | P-001 |

### v2.0 계획서

| ID | 계획서 | 상태 | 진행률 | 설명 | 의존성 |
|----|--------|------|--------|------|--------|
| P-009 | [PLAN_legacy_cleanup](./PLAN_legacy_cleanup.md) | ✅ Complete | 100% | v1.0 레거시 기능 삭제 (채널, 멘션, 아침브리핑) | P-001 |
| P-010 | [PLAN_autonomous_core](./PLAN_autonomous_core.md) | ✅ Complete | 100% | 자율 판단 코어 (Observe-Think-Act-Reflect 루프) | P-009 |
| P-011 | [PLAN_memory_system](./PLAN_memory_system.md) | ✅ Complete | 100% | 학습 메모리 시스템 (교훈 저장, 유동적 실행 주기) | P-010 |
| P-012 | PLAN_prompt_engineering | ⏳ Planned | 0% | 프롬프트 템플릿 설계 및 최적화 | P-010 |
| P-013 | [PLAN_calendar_integration](./PLAN_calendar_integration.md) | ⏳ Planned | 0% | 외부 캘린더 연동 (Google, iCloud) | P-014 |
| P-014 | [PLAN_multi_user_system](./PLAN_multi_user_system.md) | ✅ Complete | 100% | 다중 사용자 OAuth 토큰 관리 | P-011 |

---

## 🔗 계획서 의존성 그래프

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         계획서 의존성 그래프                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   [v1.0 Foundation]                                                         │
│                                                                             │
│   P-003 Git Workflow ─────────────────────────────────┐                     │
│         ✅                                            │                     │
│                                                       ▼                     │
│   P-001 Core ──────────────────▶ P-002 Deployment ────┤                     │
│         ✅                             ✅             │                     │
│          │                                            │                     │
│          │                                            │                     │
│          ▼                                            │                     │
│   P-004 Tool Expansion ◀──────────────────────────────┘                     │
│         🔄 40%                                                              │
│                                                                             │
│   ─────────────────────────────────────────────────────────────────         │
│                                                                             │
│   [v2.0 Autonomous]                                                         │
│                                                                             │
│   P-001 ────▶ P-009 Legacy Cleanup ────▶ P-010 Autonomous Core              │
│                       ⏳                           ⏳                        │
│                                                     │                       │
│                                                     ├───▶ P-011 Memory      │
│                                                     │            ⏳         │
│                                                     │                       │
│                                                     └───▶ P-012 Prompts     │
│                                                                  ⏳         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📅 마일스톤

### v1.0 마일스톤

| 마일스톤 | 상태 | 날짜 | 포함 계획서 |
|----------|------|------|------------|
| M1: Core Complete | ✅ | 2025-12-28 | P-001 |
| M2: Production Ready | ✅ | 2025-12-30 | P-002 |
| M3: Dev Workflow | ✅ | 2026-01-01 | P-003 |
| M4: Tool Expansion | 🔄 | TBD | P-004 |

### v2.0 마일스톤

| 마일스톤 | 상태 | 목표 날짜 | 포함 계획서 |
|----------|------|----------|------------|
| M5: Autonomous MVP | ⏳ | TBD | P-010 |
| M6: Learning System | ⏳ | TBD | P-011 |
| M7: Production v2.0 | ⏳ | TBD | P-010, P-011, P-012 |

---

## 📋 각 계획서 요약

### P-001: PLAN_proactive_ai_assistant (✅ Complete)

> **v1.0 핵심 기능 구현**

**Phase 구성**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | 프로젝트 기반 구축 | ✅ |
| Phase 2 | Slack Bot 연동 | ✅ |
| Phase 3 | LLM 통합 | ✅ |
| Phase 4 | 날씨 도구 | ✅ |
| Phase 5 | 스케줄러 | ✅ |
| Phase 6 | 일정 도구 | ✅ |
| Phase 7 | 안정화 | ✅ |

**산출물**: Slack Bot, LLM 대화, 날씨/일정/스케줄러 기능

---

### P-002: PLAN_deployment (✅ Complete)

> **배포 및 운영 환경 구축**

**Phase 구성**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | Docker 컨테이너화 | ✅ |
| Phase 2 | CI/CD (GitHub Actions) | ✅ |
| Phase 3 | HP T620 서버 배포 | ✅ |
| Phase 4 | 모니터링 (Uptime Kuma, Beszel, Dozzle) | ✅ |
| Phase 5 | 문서화 | ✅ |

**산출물**: Dockerfile, docker-compose, CI/CD 워크플로우, 모니터링 스택

---

### P-003: PLAN_git_workflow_improvement (✅ Complete)

> **Git 워크플로우 개선**

**Phase 구성**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | Branch Protection 설정 | ✅ |
| Phase 2 | PR 템플릿 및 자동화 | ✅ |
| Phase 3 | 워크플로우 문서 작성 | ✅ |
| Phase 4 | 워크플로우 테스트 | ✅ |

**산출물**: Branch Protection Rules, PR 템플릿, CONTRIBUTING.md

---

### P-004: PLAN_tool_plugin_expansion (🔄 40%)

> **도구 플러그인 시스템 확장**

**Phase 구성**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | Plugin 아키텍처 | ✅ |
| Phase 2 | 길찾기 도구 | ✅ |
| Phase 3 | 웹 검색 도구 | ⏳ |
| Phase 4 | 뉴스 도구 | ⏳ |
| Phase 5 | 금융 도구 | ⏳ |

**산출물**: Tool Registry, BaseTool 클래스, 각 도구 플러그인

---

### P-009: PLAN_legacy_cleanup (⏳ Planned)

> **v1.0 레거시 기능 삭제 (v2.0 전환 준비)**

**예정 Phase**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | 채널 모니터링 기능 삭제 | ⏳ |
| Phase 2 | @멘션 핸들러 삭제 | ⏳ |
| Phase 3 | 아침 브리핑 스케줄러 삭제 | ⏳ |
| Phase 4 | 관련 테스트/문서 정리 | ⏳ |

**삭제 대상**:
- `_handle_channel()` - 채널 메시지 모니터링
- `_handle_mention()` - @멘션 처리
- `morning_briefing` 관련 코드 - 고정 시간 아침 브리핑
- `ProactiveAlertGenerator.generate_morning_briefing()`

**이유**: v2.0 자율 판단 시스템이 Rule-based 알림을 대체

---

### P-010: PLAN_autonomous_core (⏳ Planned)

> **v2.0 자율 판단 코어 시스템**

**예정 Phase**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | LangGraph 기반 구축 | ⏳ |
| Phase 2 | Observe 노드 구현 | ⏳ |
| Phase 3 | Think 노드 구현 | ⏳ |
| Phase 4 | Act 노드 구현 | ⏳ |
| Phase 5 | Reflect 노드 구현 | ⏳ |
| Phase 6 | 루프 통합 및 테스트 | ⏳ |

**예상 산출물**: StateGraph, 각 노드 구현, 자율 판단 루프

---

### P-011: PLAN_memory_system (⏳ Planned)

> **학습 메모리 시스템**

**예정 Phase**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | 메모리 스키마 설계 | ⏳ |
| Phase 2 | 교훈 저장/조회 구현 | ⏳ |
| Phase 3 | 판단 이력 저장 | ⏳ |
| Phase 4 | 메모리 정리 정책 | ⏳ |

**예상 산출물**: lessons 테이블, decisions 테이블, Memory 클래스

---

### P-012: PLAN_prompt_engineering (⏳ Planned)

> **프롬프트 템플릿 설계 및 최적화**

**예정 Phase**:
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | THINK 프롬프트 설계 | ⏳ |
| Phase 2 | REFLECT 프롬프트 설계 | ⏳ |
| Phase 3 | MESSAGE 프롬프트 설계 | ⏳ |
| Phase 4 | 프롬프트 테스트 및 최적화 | ⏳ |
| Phase 5 | 버전 관리 체계 | ⏳ |

**예상 산출물**: 프롬프트 템플릿 파일들, 테스트 케이스

---

## 🔄 작업 흐름

### 새 기능 개발 시

```
1. 요구사항 정의
   └── docs/SRS_*.md 또는 기존 SRS 업데이트

2. 계획서 작성
   └── docs/plans/PLAN_[기능명].md 생성
   └── PLAN_master.md에 등록

3. 구현
   └── 계획서의 Phase별 진행
   └── Quality Gate 통과

4. 완료
   └── 계획서 상태 업데이트
   └── PLAN_master.md 진행률 업데이트
```

### 계획서 작성 가이드

새 계획서 작성 시 다음 템플릿 사용:
→ [plan-template.md](../plan-template.md)

**필수 섹션**:
- Overview (Feature Description, Success Criteria)
- Architecture Decisions
- Dependencies
- Test Strategy
- Implementation Phases (각 Phase별 Tasks, Quality Gate)
- Risk Assessment
- Progress Tracking

---

## 📊 관련 문서

| 문서 | 설명 | 위치 |
|------|------|------|
| 요구사항 정의서 | v2.0 자율 에이전트 SRS | [SRS_autonomous_panager.md](../SRS_autonomous_panager.md) |
| 계획서 템플릿 | 새 계획서 작성용 | [plan-template.md](../../plan-template.md) |
| 배포 가이드 | Docker 배포 방법 | [DEPLOYMENT.md](../DEPLOYMENT.md) |
| 운영 가이드 | 모니터링, 로깅 | [OPERATIONS.md](../OPERATIONS.md) |
| 기여 가이드 | 개발 규칙, Git 워크플로우 | [CONTRIBUTING.md](../../CONTRIBUTING.md) |

---

## 📝 업데이트 지침

이 문서는 다음 상황에서 업데이트합니다:

1. **새 계획서 생성 시**: 계획서 목록에 추가
2. **계획서 상태 변경 시**: 상태 및 진행률 업데이트
3. **마일스톤 완료 시**: 마일스톤 상태 업데이트
4. **의존성 변경 시**: 의존성 그래프 업데이트

---

## ✍️ 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-01-05 | 1.1 | P-014 다중 사용자 시스템 완료, P-011 상태 업데이트 |
| 2026-01-03 | 1.0 | 최초 작성 |

---

**문서 끝**
